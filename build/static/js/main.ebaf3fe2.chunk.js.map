{"version":3,"sources":["game/player.ts","game/card.ts","game/noble.ts","utils/utilities.ts","game/tier1Cards.ts","game/tier2Cards.ts","game/tier3Cards.ts","game/game.ts","client/SocketClient.ts","stores/Stores.ts","stores/GameStore.ts","components/Game/PlayerComponent.tsx","components/Game/NobleComponent.tsx","components/Game/CardStackComponent.tsx","components/Game/ChipStackComponent.tsx","components/Game/GameComponent.tsx","components/App/App.tsx","index.tsx"],"names":["fakeTableau","pointValue","color","tier","costs","Player","id","name","reserveCards","this","forEach","card","tableau","push","chipColor","filter","length","chips","get","deficit","cost","amount","buyingPowerForColor","wildAmount","noble","cardRequirements","requirement","meetsNobleRequirement","tempChips","currentValue","set","temp","index","indexOf","splice","console","log","values","Array","from","reduce","s","c","cardPoints","noblesPoints","nobles","getChipCount","tempChipCount","observable","Map","computed","action","AllCardColors","allNobles","randomizeArray","array","map","a","sort","Math","random","value","b","tier1Cards","tier2Cards","tier3Cards","SplendorGame","numberOfPlayers","players","initializePlayers","initializeChips","initializeCards","initializeNobles","times","callbackfn","_","chipStacks","cardStacks","currentPlayer","hasTempChips","canBuyCard","fulfillsRequirementsForNoble","grabbedNoble","newValue","split","nobleCheck","currentPlayerIndex","currentRound","canReserveCard","targetId","chipColorForId","removeChips","addChip","saveTempChips","endPlayerTurn","ids","costTier","Number","cardIndex","cardStack","cardToBuy","costReduction","costReductionFor","netCostForColor","chipAmount","finalCost","removeChip","addChips","SocketClient","url","socket","cook","document","cookie","uuidv4","openSocket","on","emit","message","stores","gameStore","game","client","PlayerComponent","observer","handleChange","event","target","handleSubmit","props","player","preventDefault","activeClass","className","totalPoints","chipCount","JSON","stringify","onSubmit","type","onChange","React","Component","NobleComponent","key","cards","cardCostTier","remaining","remainingCards","visibleCards","slice","canPurchase","playerCanPurchase","onClick","reserveHandler","currentTarget","disabled","playerCanReserve","purchaseHandler","chipStackKeys","keys","returnChipHandler","stackColor","stackAmount","playerAmount","find","chip","grabOneEnabled","grabTwoEnabled","singleChipHandler","doubleChipHandler","GameComponent","App","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.ebaf3fe2.chunk.js","sourcesContent":["import { ChipColor } from \"./game\";\nimport { Card } from \"./card\";\nimport { observable, computed, action } from \"mobx\";\nimport { Noble, CardRequirement } from \"./noble\";\n\nconst fakeTableau: Card[] = [\n  { pointValue: 0, color: \"red\", tier: 1, costs: [] },\n  { pointValue: 0, color: \"red\", tier: 1, costs: [] },\n  { pointValue: 0, color: \"blue\", tier: 1, costs: [] },\n  { pointValue: 0, color: \"blue\", tier: 1, costs: [] },\n  { pointValue: 0, color: \"green\", tier: 1, costs: [] },\n  { pointValue: 0, color: \"green\", tier: 1, costs: [] },\n  { pointValue: 0, color: \"white\", tier: 1, costs: [] },\n  { pointValue: 0, color: \"white\", tier: 1, costs: [] },\n  { pointValue: 0, color: \"black\", tier: 1, costs: [] },\n  { pointValue: 0, color: \"black\", tier: 1, costs: [] },\n] \nexport default class Player {\n  \n  id: number;\n  @observable name: string;\n  @observable chips = new Map<ChipColor, number>();\n  @observable tempChips: ChipColor[] = [];\n  @observable nobles: Noble[] = [];\n\n  @observable tableau: Card[] = [];\n  reserveCards: Card[] = [];\n\n  constructor(id: number, name: string) {\n    this.id = id;\n    this.name = name;\n    fakeTableau.forEach(card => this.tableau.push(card))\n  }\n\n  public costReductionFor(chipColor: ChipColor): number {\n    return this.tableau.filter((card) => card.color === chipColor).length;\n  }\n\n  public buyingPowerForColor(chipColor: ChipColor): number {\n    const chipPower = this.chips.get(chipColor) || 0;\n    const cardPower = this.tableau.filter((card) => card.color === chipColor)\n      .length;\n    return chipPower + cardPower;\n  }\n\n  public canBuyCard(card: Card): boolean {\n    var deficit = 0;\n    card.costs.forEach((cost) => {\n      const amount = this.buyingPowerForColor(cost.color);\n      if (cost.amount > amount) {\n        deficit += cost.amount - amount;\n      }\n    });\n    const wildAmount = this.chips.get(\"wild\") || 0;\n    const deficitMinusWilds = deficit - wildAmount;\n    return deficitMinusWilds <= 0;\n  }\n\n  public fulfillsRequirementsForNoble(noble: Noble): boolean {\n    const numberOfNotMetConditions = noble.cardRequirements.filter( requirement => {\n      return !this.meetsNobleRequirement(requirement)\n    })\n    return numberOfNotMetConditions.length === 0;\n  }\n\n  private meetsNobleRequirement(requirement: CardRequirement):boolean {\n    return this.tableau.filter( card => card.color === requirement.color).length >= requirement.amount\n  }\n\n  @computed\n  get canReserveCard(): boolean {\n    return this.reserveCards.length < 3;\n  }\n\n  @computed\n  get totalPoints(): number {\n    var cardPoints = 0;\n    this.tableau.forEach( card => cardPoints += card.pointValue)\n    var noblesPoints = 0;\n    this.nobles.forEach( noble => noblesPoints += noble.pointValue)\n    return cardPoints + noblesPoints;\n  }\n\n  @computed\n  get chipCount(): number {\n    return this.getChipCount();\n  }\n\n  @computed\n  get tempChipCount(): number {\n    return this.getChipCount(true);\n  }\n\n  @computed\n  get hasTempChips(): boolean {\n    return this.tempChipCount > 0;\n  }\n\n  public saveTempChips() {\n    this.tempChips.forEach((color: ChipColor) => {\n      const currentValue = this.chips.get(color) || 0;\n      this.chips.set(color, currentValue + 1);\n    });\n    this.tempChips = [];\n  }\n\n  public addChip(\n    chipColor: ChipColor,\n    amount: number = 1,\n    temp: boolean = false\n  ) {\n    if (temp) {\n      this.tempChips.push(chipColor);\n    } else {\n      const currentValue = this.chips.get(chipColor) || 0;\n      this.chips.set(chipColor, currentValue + amount);\n    }\n  }\n\n  @action\n  removeChip(chipColor: ChipColor, amount: number = 1, temp: boolean = false) {\n    if (temp) {\n      const index = this.tempChips.indexOf(chipColor);\n      this.tempChips.splice(index, 1);\n    } else {\n    }\n    const currentValue = this.chips.get(chipColor);\n    if (!currentValue) {\n      return;\n    }\n    console.log(\"removing chip\", chipColor, currentValue, amount);\n    if (currentValue >= amount) {\n      this.chips.set(chipColor, currentValue - amount);\n    } else {\n      this.chips.set(chipColor, 0);\n    }\n  }\n\n  private getChipCount(temp: boolean = false): number {\n    if (temp) {\n      return this.tempChips.length;\n    }\n    const values = Array.from(this.chips.values());\n    if (!values.length) {\n      return 0;\n    }\n    return values.reduce((s, c) => s + c);\n  }\n}\n","import { ChipColor } from \"./game\";\n\nexport type CardColor = \"white\" | \"blue\" | \"green\" | \"red\" | \"black\";\n\nexport const AllCardColors: CardColor[] = [\n  \"white\",\n  \"blue\",\n  \"green\",\n  \"red\",\n  \"black\",\n];\n\nexport type CardCostTier = 1 | 2 | 3;\n\nexport type CardCost = {\n  color: ChipColor;\n  amount: number;\n};\n\nexport type Card = {\n  pointValue: number;\n  color: CardColor;\n  tier: CardCostTier;\n  costs: CardCost[];\n};\n","import { CardColor } from \"./card\";\n\nexport type CardRequirement = {\n  color: CardColor;\n  amount: number;\n};\n\nexport type Noble = {\n  pointValue: number;\n  cardRequirements: CardRequirement[];\n};\n\nexport const allNobles: Noble[] = [\n  {\n    pointValue: 3,\n    cardRequirements: [\n      { color: \"blue\", amount: 4 },\n      { color: \"white\", amount: 4 },\n    ],\n  },\n  {\n    pointValue: 3,\n    cardRequirements: [\n      { color: \"blue\", amount: 4 },\n      { color: \"green\", amount: 4 },\n    ],\n  },\n  {\n    pointValue: 3,\n    cardRequirements: [\n      { color: \"black\", amount: 4 },\n      { color: \"red\", amount: 4 },\n    ],\n  },\n  {\n    pointValue: 3,\n    cardRequirements: [\n      { color: \"red\", amount: 4 },\n      { color: \"green\", amount: 4 },\n    ],\n  },\n  {\n    pointValue: 3,\n    cardRequirements: [\n      { color: \"black\", amount: 4 },\n      { color: \"white\", amount: 4 },\n    ],\n  },\n  {\n    pointValue: 3,\n    cardRequirements: [\n      { color: \"black\", amount: 3 },\n      { color: \"blue\", amount: 3 },\n      { color: \"white\", amount: 3 },\n    ],\n  },\n  {\n    pointValue: 3,\n    cardRequirements: [\n      { color: \"black\", amount: 3 },\n      { color: \"red\", amount: 3 },\n      { color: \"white\", amount: 3 },\n    ],\n  },\n  {\n    pointValue: 3,\n    cardRequirements: [\n      { color: \"black\", amount: 3 },\n      { color: \"red\", amount: 3 },\n      { color: \"green\", amount: 3 },\n    ],\n  },\n  {\n    pointValue: 3,\n    cardRequirements: [\n      { color: \"green\", amount: 3 },\n      { color: \"blue\", amount: 3 },\n      { color: \"red\", amount: 3 },\n    ],\n  },\n  {\n    pointValue: 3,\n    cardRequirements: [\n      { color: \"green\", amount: 3 },\n      { color: \"blue\", amount: 3 },\n      { color: \"white\", amount: 3 },\n    ],\n  },\n];\n","export function randomizeArray(array: any[]): any[] {\n  return array\n    .map((a) => ({ sort: Math.random(), value: a }))\n    .sort((a, b) => a.sort - b.sort)\n    .map((a) => a.value);\n}\n\nexport function repeat(times: number, callbackfn: (index: number) => void) {\n  [...Array(times)].forEach((_, index) => {\n    callbackfn(index);\n  });\n}\n","import { Card } from \"./card\";\n\nexport const tier1Cards: Card[] = [\n  // best value\n  {\n    color: \"white\",\n    pointValue: 1,\n    tier: 1,\n    costs: [{ color: \"green\", amount: 4 }],\n  },\n  {\n    color: \"blue\",\n    pointValue: 1,\n    tier: 1,\n    costs: [{ color: \"red\", amount: 4 }],\n  },\n  {\n    color: \"green\",\n    pointValue: 1,\n    tier: 1,\n    costs: [{ color: \"black\", amount: 4 }],\n  },\n  {\n    color: \"red\",\n    pointValue: 1,\n    tier: 1,\n    costs: [{ color: \"white\", amount: 4 }],\n  },\n  {\n    color: \"black\",\n    pointValue: 1,\n    tier: 1,\n    costs: [{ color: \"blue\", amount: 4 }],\n  },\n  // great value\n  {\n    color: \"white\",\n    pointValue: 0,\n    tier: 1,\n    costs: [\n      { color: \"red\", amount: 2 },\n      { color: \"black\", amount: 1 },\n    ],\n  },\n  {\n    color: \"blue\",\n    pointValue: 0,\n    tier: 1,\n    costs: [\n      { color: \"white\", amount: 1 },\n      { color: \"black\", amount: 2 },\n    ],\n  },\n  {\n    color: \"green\",\n    pointValue: 0,\n    tier: 1,\n    costs: [\n      { color: \"white\", amount: 2 },\n      { color: \"blue\", amount: 1 },\n    ],\n  },\n  {\n    color: \"red\",\n    pointValue: 0,\n    tier: 1,\n    costs: [\n      { color: \"blue\", amount: 2 },\n      { color: \"green\", amount: 1 },\n    ],\n  },\n  {\n    color: \"black\",\n    pointValue: 0,\n    tier: 1,\n    costs: [\n      { color: \"green\", amount: 2 },\n      { color: \"red\", amount: 1 },\n    ],\n  },\n  // medium value\n  {\n    color: \"white\",\n    pointValue: 0,\n    tier: 1,\n    costs: [{ color: \"blue\", amount: 3 }],\n  },\n  {\n    color: \"blue\",\n    pointValue: 0,\n    tier: 1,\n    costs: [{ color: \"black\", amount: 3 }],\n  },\n  {\n    color: \"green\",\n    pointValue: 0,\n    tier: 1,\n    costs: [{ color: \"red\", amount: 3 }],\n  },\n  {\n    color: \"red\",\n    pointValue: 0,\n    tier: 1,\n    costs: [{ color: \"white\", amount: 3 }],\n  },\n  {\n    color: \"black\",\n    pointValue: 0,\n    tier: 1,\n    costs: [{ color: \"green\", amount: 3 }],\n  },\n  // ok value\n  {\n    color: \"white\",\n    pointValue: 0,\n    tier: 1,\n    costs: [\n      { color: \"blue\", amount: 1 },\n      { color: \"green\", amount: 1 },\n      { color: \"red\", amount: 1 },\n      { color: \"black\", amount: 1 },\n    ],\n  },\n  {\n    color: \"blue\",\n    pointValue: 0,\n    tier: 1,\n    costs: [\n      { color: \"white\", amount: 1 },\n      { color: \"green\", amount: 1 },\n      { color: \"red\", amount: 1 },\n      { color: \"black\", amount: 1 },\n    ],\n  },\n  {\n    color: \"green\",\n    pointValue: 0,\n    tier: 1,\n    costs: [\n      { color: \"white\", amount: 1 },\n      { color: \"blue\", amount: 1 },\n      { color: \"red\", amount: 1 },\n      { color: \"black\", amount: 1 },\n    ],\n  },\n  {\n    color: \"red\",\n    pointValue: 0,\n    tier: 1,\n    costs: [\n      { color: \"white\", amount: 1 },\n      { color: \"blue\", amount: 1 },\n      { color: \"green\", amount: 1 },\n      { color: \"black\", amount: 1 },\n    ],\n  },\n  {\n    color: \"black\",\n    pointValue: 0,\n    tier: 1,\n    costs: [\n      { color: \"white\", amount: 1 },\n      { color: \"blue\", amount: 1 },\n      { color: \"green\", amount: 1 },\n      { color: \"red\", amount: 1 },\n    ],\n  },\n  // middling value\n  {\n    color: \"white\",\n    pointValue: 0,\n    tier: 1,\n    costs: [\n      { color: \"blue\", amount: 2 },\n      { color: \"black\", amount: 2 },\n    ],\n  },\n  {\n    color: \"blue\",\n    pointValue: 0,\n    tier: 1,\n    costs: [\n      { color: \"green\", amount: 2 },\n      { color: \"black\", amount: 2 },\n    ],\n  },\n  {\n    color: \"green\",\n    pointValue: 0,\n    tier: 1,\n    costs: [\n      { color: \"blue\", amount: 2 },\n      { color: \"red\", amount: 2 },\n    ],\n  },\n  {\n    color: \"red\",\n    pointValue: 0,\n    tier: 1,\n    costs: [\n      { color: \"white\", amount: 2 },\n      { color: \"red\", amount: 2 },\n    ],\n  },\n  {\n    color: \"black\",\n    pointValue: 0,\n    tier: 1,\n    costs: [\n      { color: \"white\", amount: 2 },\n      { color: \"green\", amount: 2 },\n    ],\n  },\n];\n","import { Card } from \"./card\";\n\nexport const tier2Cards: Card[] = [\n  {\n    color: \"red\",\n    pointValue: 3,\n    tier: 2,\n    costs: [\n      { color: \"white\", amount: 3 },\n      { color: \"blue\", amount: 5 },\n      { color: \"green\", amount: 3 },\n      { color: \"black\", amount: 3 },\n    ],\n  },\n  {\n    color: \"red\",\n    pointValue: 3,\n    tier: 2,\n    costs: [\n      { color: \"white\", amount: 3 },\n      { color: \"blue\", amount: 5 },\n      { color: \"green\", amount: 3 },\n      { color: \"black\", amount: 3 },\n    ],\n  },\n  {\n    color: \"red\",\n    pointValue: 3,\n    tier: 2,\n    costs: [\n      { color: \"white\", amount: 3 },\n      { color: \"blue\", amount: 5 },\n      { color: \"green\", amount: 3 },\n      { color: \"black\", amount: 3 },\n    ],\n  },\n  {\n    color: \"red\",\n    pointValue: 3,\n    tier: 2,\n    costs: [\n      { color: \"white\", amount: 3 },\n      { color: \"blue\", amount: 5 },\n      { color: \"green\", amount: 3 },\n      { color: \"black\", amount: 3 },\n    ],\n  },\n];\n","import { Card } from \"./card\";\n\nexport const tier3Cards: Card[] = [\n  {\n    color: \"white\",\n    pointValue: 3,\n    tier: 3,\n    costs: [\n      { color: \"blue\", amount: 3 },\n      { color: \"green\", amount: 3 },\n      { color: \"red\", amount: 5 },\n      { color: \"black\", amount: 3 },\n    ],\n  },\n  {\n    color: \"blue\",\n    pointValue: 3,\n    tier: 3,\n    costs: [\n      { color: \"white\", amount: 3 },\n      { color: \"green\", amount: 3 },\n      { color: \"red\", amount: 3 },\n      { color: \"black\", amount: 5 },\n    ],\n  },\n  {\n    color: \"green\",\n    pointValue: 3,\n    tier: 3,\n    costs: [\n      { color: \"white\", amount: 5 },\n      { color: \"blue\", amount: 3 },\n      { color: \"red\", amount: 3 },\n      { color: \"black\", amount: 3 },\n    ],\n  },\n  {\n    color: \"red\",\n    pointValue: 3,\n    tier: 3,\n    costs: [\n      { color: \"white\", amount: 3 },\n      { color: \"blue\", amount: 5 },\n      { color: \"green\", amount: 3 },\n      { color: \"black\", amount: 3 },\n    ],\n  },\n  {\n    color: \"black\",\n    pointValue: 3,\n    tier: 3,\n    costs: [\n      { color: \"white\", amount: 3 },\n      { color: \"blue\", amount: 3 },\n      { color: \"green\", amount: 5 },\n      { color: \"red\", amount: 3 },\n    ],\n  },\n  {\n    color: \"white\",\n    pointValue: 4,\n    tier: 3,\n    costs: [{ color: \"black\", amount: 7 }],\n  },\n  {\n    color: \"black\",\n    pointValue: 4,\n    tier: 3,\n    costs: [{ color: \"red\", amount: 7 }],\n  },\n  {\n    color: \"blue\",\n    pointValue: 4,\n    tier: 3,\n    costs: [{ color: \"white\", amount: 7 }],\n  },\n  {\n    color: \"red\",\n    pointValue: 4,\n    tier: 3,\n    costs: [{ color: \"green\", amount: 7 }],\n  },\n  {\n    color: \"green\",\n    pointValue: 4,\n    tier: 3,\n    costs: [{ color: \"blue\", amount: 7 }],\n  },\n  {\n    color: \"red\",\n    pointValue: 4,\n    tier: 3,\n    costs: [\n      { color: \"blue\", amount: 3 },\n      { color: \"green\", amount: 6 },\n      { color: \"red\", amount: 3 },\n    ],\n  },\n  {\n    color: \"black\",\n    pointValue: 4,\n    tier: 3,\n    costs: [\n      { color: \"green\", amount: 3 },\n      { color: \"red\", amount: 6 },\n      { color: \"black\", amount: 3 },\n    ],\n  },\n];\n","import Player from \"./player\";\nimport { CardCostTier, Card, CardColor, AllCardColors } from \"./card\";\nimport { Noble, allNobles } from \"./noble\";\nimport { randomizeArray, repeat } from \"../utils/utilities\";\nimport { computed, observable, action } from \"mobx\";\nimport { tier1Cards } from \"./tier1Cards\";\nimport { tier2Cards } from \"./tier2Cards\";\nimport { tier3Cards } from \"./tier3Cards\";\n\nexport type PlayerCount = 2 | 3 | 4;\nexport type ChipColor = CardColor | \"wild\";\n\nexport default class SplendorGame {\n  @observable currentRound: number = 1;\n\n  players: Player[] = [];\n\n  @observable chipStacks = new Map<ChipColor, number>();\n  @observable cardStacks = new Map<CardCostTier, Card[]>();\n  @observable nobles: Noble[] = [];\n\n  @observable private currentPlayerIndex = 0;\n\n  constructor(numberOfPlayers: PlayerCount) {\n    this.initializePlayers(numberOfPlayers);\n    this.initializeChips(numberOfPlayers === 4 ? 7 : numberOfPlayers + 2);\n    this.initializeCards();\n    this.initializeNobles(numberOfPlayers + 1);\n  }\n\n  private initializePlayers(amount: number) {\n    repeat(amount, (index) => {\n      this.players.push(new Player(index + 1, \"player\"));\n    });\n  }\n\n  private initializeChips(amount: number) {\n    AllCardColors.forEach((color) => {\n      this.chipStacks.set(color, amount);\n    });\n    this.chipStacks.set(\"wild\", 5);\n  }\n\n  private initializeCards() {\n    this.cardStacks.set(1, randomizeArray(tier1Cards));\n    this.cardStacks.set(2, randomizeArray(tier2Cards));\n    this.cardStacks.set(3, randomizeArray(tier3Cards));\n  }\n\n  private initializeNobles(amount: number) {\n    this.nobles = randomizeArray(allNobles).splice(0, amount);\n  }\n\n  @computed\n  get currentPlayer(): Player {\n    return this.players[this.currentPlayerIndex];\n  }\n\n  public playerCanPurchase(card: Card): boolean {\n    return (\n      !this.currentPlayer.hasTempChips && this.currentPlayer.canBuyCard(card)\n    );\n  }\n\n  @computed\n  get playerCanReserve(): boolean {\n    return (\n      !this.currentPlayer.hasTempChips && this.currentPlayer.canReserveCard\n    );\n  }\n\n  @action\n  singleChipHandler = (targetId: string) => {\n    const chipColor = this.chipColorForId(targetId);\n    this.removeChips(chipColor, 1);\n    this.currentPlayer.addChip(chipColor, 1, true);\n    if (this.currentPlayer.tempChipCount >= 3) {\n      this.currentPlayer.saveTempChips();\n      this.endPlayerTurn();\n    }\n  };\n\n  @action\n  doubleChipHandler = (targetId: string) => {\n    const chipColor = this.chipColorForId(targetId);\n    this.removeChips(chipColor, 2);\n    this.currentPlayer.addChip(chipColor, 2);\n    this.endPlayerTurn();\n  };\n\n  @action purchaseHandler = (targetId: string) => {\n    const ids = targetId.split(\"-\");\n    const costTier = Number(ids[0]) as CardCostTier;\n    const cardIndex = Number(ids[1]);\n    const cardStack = this.cardStacks.get(costTier);\n    if (!cardStack) {\n      this.endPlayerTurn();\n      return;\n    }\n    const cardToBuy = cardStack.splice(cardIndex, 1)[0];\n\n    var deficit = 0;\n    cardToBuy.costs.forEach((cost) => {\n      const costReduction = this.currentPlayer.costReductionFor(cost.color);\n      const netCostForColor = cost.amount - costReduction;\n      const chipAmount = this.currentPlayer.chips.get(cost.color) || 0;\n      if (netCostForColor > chipAmount) {\n        deficit += netCostForColor - chipAmount;\n      }\n      const finalCost = netCostForColor >= 0 ? netCostForColor : 0;\n      this.currentPlayer.removeChip(cost.color, finalCost);\n      this.addChips(cost.color, finalCost);\n    });\n\n    if (deficit) {\n      this.currentPlayer.removeChip(\"wild\", deficit);\n      this.addChips(\"wild\", deficit);\n    }\n    this.currentPlayer.tableau.push(cardToBuy);\n    this.endPlayerTurn();\n  };\n\n  @action\n  returnChipHandler = (targetId: string) => {\n    const color = this.chipColorForId(targetId);\n    this.currentPlayer.removeChip(color, 1, true);\n    this.addChips(color, 1);\n  };\n\n  @action\n  reserveHandler = (targetId: string) => {\n    const ids = targetId.split(\"-\");\n    const tier = Number(ids[0]) as CardCostTier;\n    const index = Number(ids[1]);\n    const cardStack = this.cardStacks.get(tier);\n\n    if (cardStack) {\n      const card = cardStack.splice(index, 1)[0];\n      this.currentPlayer.reserveCards.push(card);\n      const currentValue = this.chipStacks.get(\"wild\");\n      if (currentValue && currentValue > 0) {\n        this.chipStacks.set(\"wild\", currentValue - 1);\n        this.currentPlayer.addChip(\"wild\");\n      }\n      this.endPlayerTurn();\n    }\n  };\n\n  private nobleCheck() {\n    const availableNobles = this.nobles.filter((noble) => {\n      return this.currentPlayer.fulfillsRequirementsForNoble(noble);\n    });\n    if (availableNobles.length > 0) {\n      const grabbedNoble = this.nobles.splice(0, 1)[0];\n      this.currentPlayer.nobles.push(grabbedNoble);\n    }\n  }\n\n  private removeChips(chipColor: ChipColor, amount: number) {\n    const currentValue = this.chipStacks.get(chipColor) || 0;\n    const newValue = currentValue - amount;\n    this.chipStacks.set(chipColor, newValue < 0 ? 0 : newValue);\n  }\n\n  private addChips(chipColor: ChipColor, amount: number = 1) {\n    const currentValue = this.chipStacks.get(chipColor) || 0;\n    this.chipStacks.set(chipColor, currentValue + amount);\n  }\n\n  private chipColorForId(id: string): ChipColor {\n    return id.split(\"-\")[0] as ChipColor;\n  }\n\n  private endPlayerTurn() {\n    this.nobleCheck();\n    this.currentPlayerIndex++;\n    if (this.currentPlayerIndex >= this.players.length) {\n      this.currentRound++;\n      this.currentPlayerIndex = 0;\n    }\n  }\n}\n","import openSocket from \"socket.io-client\";\nimport { observable } from \"mobx\";\nimport { v4 as uuidv4 } from \"uuid\";\n\nexport default class SocketClient {\n  private socket: SocketIOClient.Socket;\n\n  @observable clientId: string = \"\";\n\n  constructor(url: string) {\n    const cook = document.cookie;\n    console.log(cook);\n    console.log(uuidv4());\n    this.socket = openSocket(url);\n    this.socket.on(\"connect\", () => {\n      console.log(\"connected to server\");\n      this.socket.emit(\"message\", \"hi from me\");\n    });\n  }\n\n  public sendMessage(message: string) {\n    this.socket.emit(\"message\", message);\n  }\n\n  private configureClientId() {}\n}\n","import GameStore from \"./GameStore\";\nimport SocketClient from \"../client/SocketClient\";\n\nconst stores = {\n  gameStore: new GameStore(),\n  client: new SocketClient(\"http://localhost:8080\"),\n};\n\nexport default stores;\n","import SplendorGame from \"../game/game\";\n\nexport default class GameStore {\n  game: SplendorGame = new SplendorGame(4);\n}\n","import React from \"react\";\nimport stores from \"../../stores/Stores\";\nimport { observer } from \"mobx-react\";\nimport { observable } from \"mobx\";\nimport Player from \"../../game/player\";\nimport \"./PlayerComponent.scss\";\n\nexport type PlayerProps = {\n  player: Player;\n};\n\n@observer\nexport default class PlayerComponent extends React.Component<PlayerProps> {\n  @observable name: string = \"\";\n\n  handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.name = event.target.value;\n  };\n\n  handleSubmit = (event: React.FormEvent<HTMLFormElement>) => {\n    this.props.player.name = this.name;\n    event.preventDefault();\n  };\n\n  render() {\n    const { player } = this.props;\n    const isActive = stores.gameStore.game.currentPlayer === this.props.player;\n    const activeClass = isActive ? \"active\" : \"\";\n    return (\n      <div className=\"PlayerComponent\">\n        <div className={activeClass}>\n          <div>player {player.name}</div>\n          <div>id {player.id}</div>\n          <div>points {player.totalPoints}</div>\n          <div>\n            chips ({player.chipCount}) {JSON.stringify(player.chips)}\n          </div>\n          <div>\n            tempchips ({player.tempChipCount}){JSON.stringify(player.tempChips)}\n          </div>\n          <div>\n            cards ({player.tableau.length}){JSON.stringify(player.tableau)}\n          </div>\n          <div>\n            nobles ({player.nobles.length}){JSON.stringify(player.nobles)}\n          </div>\n          <form onSubmit={this.handleSubmit}>\n            <label>\n              change name:\n              <input\n                type=\"text\"\n                value={this.name}\n                onChange={this.handleChange}\n              ></input>\n            </label>\n          </form>\n        </div>\n      </div>\n    );\n  }\n}\n","import { Noble } from \"../../game/noble\";\nimport React from \"react\";\nimport \"./NobleComponent.scss\";\n\nexport type NobleComponentProps = {\n  noble: Noble;\n};\n\nexport const NobleComponent: React.FunctionComponent<NobleComponentProps> = (\n  props\n) => {\n  return (\n    <div className=\"NobleComponent\">\n      <div className=\"point-value\">{props.noble.pointValue}</div>\n      {props.noble.cardRequirements.map((requirement) => {\n        return (\n          <div className={\"requirement \" + requirement.color} key={`${requirement.color}${requirement.amount}`}>\n            {requirement.amount}\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n","import React from \"react\";\nimport \"./CardStackComponent.scss\";\nimport stores from \"../../stores/Stores\";\nimport { observer } from \"mobx-react\";\nimport { CardCostTier } from \"../../game/card\";\n\nexport type CardStackComponentProps = {\n  cardCostTier: CardCostTier;\n};\n\nexport default observer((props: CardStackComponentProps) => {\n  const { game } = stores.gameStore;\n  const cards = game.cardStacks.get(props.cardCostTier);\n  if (!cards) {\n    return <div />;\n  }\n\n  const remaining = cards.length - 4;\n  const remainingCards = remaining > 0 ? remaining : 0;\n  const visibleCards = cards.slice(0, 4);\n  return (\n    <div className=\"CardStackComponent\">\n      <div className=\"card remaining\">{remainingCards} cards remaining</div>\n      {visibleCards.map((card, index) => {\n        const canPurchase = game.playerCanPurchase(card);\n        const id = `${props.cardCostTier}-${index}`;\n        return (\n          <div className=\"card\">\n            <div className=\"point-value\">\n              {card.pointValue > 0 ? card.pointValue : \"\\u00a0\"}\n            </div>\n            <div className=\"indicator\">\n              <div className={\"color-indicator \" + card.color}> </div>\n            </div>\n            <div className=\"costs\">\n              {card.costs.map((cost) => {\n                return (\n                  <div className={`cost ${cost.color}`}>{cost.amount}</div>\n                );\n              })}\n            </div>\n            <div className=\"actions\">\n              <button\n                id={id}\n                onClick={(event) => game.reserveHandler(event.currentTarget.id)}\n                disabled={!game.playerCanReserve}\n              >\n                hold\n              </button>\n              <button\n                id={id}\n                onClick={(event) =>\n                  game.purchaseHandler(event.currentTarget.id)\n                }\n                disabled={!canPurchase}\n              >\n                buy\n              </button>\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n});\n","import React from \"react\";\nimport stores from \"../../stores/Stores\";\nimport { observer } from \"mobx-react\";\nimport \"./ChipStackComponent.scss\";\n\nexport default observer(() => {\n  const { game } = stores.gameStore;\n  const player = game.currentPlayer;\n  const chipStackKeys = Array.from(game.chipStacks.keys());\n  return (\n    <div className=\"ChipStackComponent\">\n      <div className=\"temp-chips\">\n        temp chips:\n        <br />\n        {player.tempChips.map((color) => {\n          return (\n            <>\n              <div className={`chip-stack ${color}`}>1</div>\n              <button\n                id={`${color}-temp-chip`}\n                onClick={(event) =>\n                  game.returnChipHandler(event.currentTarget.id)\n                }\n              >\n                return\n              </button>\n            </>\n          );\n        })}\n      </div>\n      {chipStackKeys.map((stackColor) => {\n        const stackAmount = game.chipStacks.get(stackColor) || 0;\n        const playerAmount = player.tempChips.find(\n          (chip) => chip === stackColor\n        )?.length\n          ? 1\n          : 0;\n        const grabOneEnabled = stackAmount && playerAmount === 0;\n        const grabTwoEnabled = stackAmount >= 4 && !player.tempChipCount;\n        return (\n          <>\n            <div className={`chip-stack ${stackColor}`}>{stackAmount}</div>\n            {stackColor !== \"wild\" && (\n              <>\n                <button\n                  id={`${stackColor}-1`}\n                  disabled={!grabOneEnabled}\n                  onClick={(event) =>\n                    game.singleChipHandler(event.currentTarget.id)\n                  }\n                >\n                  grab 1\n                </button>\n                <button\n                  id={`${stackColor}-2`}\n                  disabled={!grabTwoEnabled}\n                  onClick={(event) =>\n                    game.doubleChipHandler(event.currentTarget.id)\n                  }\n                >\n                  grab 2\n                </button>\n              </>\n            )}\n          </>\n        );\n      })}\n    </div>\n  );\n});\n","import React from \"react\";\nimport stores from \"../../stores/Stores\";\nimport { observer } from \"mobx-react\";\nimport PlayerComponent from \"./PlayerComponent\";\nimport { NobleComponent } from \"./NobleComponent\";\nimport CardStackComponent from \"./CardStackComponent\";\nimport ChipStackComponent from \"./ChipStackComponent\";\nimport \"./GameComponent.scss\";\n\n@observer\nexport default class GameComponent extends React.Component {\n  render() {\n    const { game } = stores.gameStore;\n    return (\n      <div className=\"GameComponent\">\n        <div>\n          round #{game.currentRound}, players:\n          {game.players.map((player) => {\n            return <PlayerComponent player={player} key={player.id} />;\n          })}\n        </div>\n        <div>\n          chips:\n          <ChipStackComponent />\n        </div>\n        <div>\n          cards:\n          <CardStackComponent cardCostTier={1} />\n          <CardStackComponent cardCostTier={2} />\n          <CardStackComponent cardCostTier={3} />\n        </div>\n        <div>\n          nobles:\n          {game.nobles.map((noble) => {\n            return <NobleComponent noble={noble} />;\n          })}\n        </div>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport \"./App.css\";\nimport GameComponent from \"../Game/GameComponent\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <div>it not splendor</div>\n\n      <GameComponent />\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App/App\";\n\nimport \"./index.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}